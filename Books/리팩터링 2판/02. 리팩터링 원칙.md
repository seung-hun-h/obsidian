#### 리팩터링 정의
- 리팩터링(명사): 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법
- 리팩터링(동사): 소프트웨어의 겉보기 동작은 그대로 유지한 채, 다양한 리팩터링 기법을 적용하여 소프트웨어를 재구성한다
- 리팩터링의 목적: 코드를 이해하고 수정하기 쉽게 한다
- 리팩터링 하는 동안에는 **코드가 항상 정상 동작** 해야 한다
#### 리팩터링을 하는 이유
- 소프트웨어 설계가 좋아진다
	- 반복된 리팩터링은 소프트웨어의 탄탄한 구조를 지탱한다
	- 중복을 제거하여 모든 코드가 언제나 고유한 동작을 수행함을 보장할 수 있다
- 소프트웨어를 이해하기 쉬워진다
- 버그를 쉽게 찾을 수 있다
	- 의도가 명확해지면 버그를 발견할 수 있다
- 프로그래밍 속도를 높일 수 있다
	- 코드를 읽고 새로운 기능을 추가할 곳을 빠르게 찾을 수 있다
#### 언제 리팩터링 해야할까?
- 준비를 위한 리팩터링
	- 코드베이스에 새로운 기능을 추가할 때 가장 좋은 리팩터링 시점
	- 구조를 바꾸면 작업하기 쉬운 부분을 찾아 리팩터링한다
	- 중복을 제거하면 버그도 없앨 수 있다
- 이해를 위한 리팩터링
	- 코드를 파악할 때마다 코드의 의도를 분명히 할 수 있는 부분을 찾아 리팩토링한다
- 쓰레기 줍기 리팩터링
	- 비효율적이거나 잘못된 코드를 찾아 리팩토링한다
	- 오래 걸리는 것들은 메모하고, 아닌 것들은 조금이나마 개선한다
- 계획된 리팩터링 vs 수시로 하는 리팩터링
	- 계획된 것보다는 수시로 리팩터링하는 것이 좋다
	- 새로운 기능을 추가하기 쉽도록 수정하자
- 오래 걸리는 리팩터링
	- 팀 전체가 리팩토링에 매달리는 것은 회의적이다
- 리팩터링 하지 말아야 할 때
	- 지저분한 코드여도 수정할 필요가 없을 때 -> 내부 동작을 이해해야만 할 때 리팩터링하자

#### 리팩터링 시 고려할 문제
- 새 기능 개발 속도 저하
	- 리팩터링의 목적은 코드베이스를 예쁘게 하는 것이 아닌, 경제적인 문제 -> 새로운 기능을 빠르게 추가하기 위함이다
	- 새기능을 추가하기 편하다고 판단되면 주저하지 말고 리팩토링하자
- 코드 소유권
	- 코드 소유권이 세분화되어 있으면 리팩토링하기 불편하다
- 브랜치
	- 가능한 짧은 기간에 개별로 작성한 코드를 마스터에 머지해야 한다
	- 지속적 통합, 트렁크 기반 개발을 고려하자
	- 지속적 통합은 머지 복잡도를 줄일 수 있고 리팩터링과 궁합이 좋다 -> 프로그램 전체에서 자주 사용하는 함수의 이름을 변경할 때 빠르게 머지하면 의미 충돌을 해결하기 쉬워진다
- 테스팅
	- 테스트 코드가 있으면 오류를 빠르게 잡을 수 있다
	- 리팩터링은 변경의 폭이 작고 빈번하므로 테스트 코드가 있으면 매우좋다
	- 테스트 코드는 새로운 기능 추가도 쉽게 하게 해준다
- 레거시 코드
	- 레거시 시스템을 파악할 때 리팩터링이 큰 도움이된다
	- 코드의 한 부분을 읽고 넘어갈 때 마다 리팩터링하자
- 데이터베이스
	- 데이터베이스도 리팩터링 대상이다'
	- 진화형 데이터베이스 설계, 데이터베이스 리팩터링 기법을 알아보자
	- 데이터베이스 리팩터링은 프로덕션 환경에서 여러 단계로 릴리즈 하는 것이 좋다

#### 리팩터링, 아키텍처, 애그니(YAGNI)
- 리팩터링이 아키텍처에 미치는 영향
	- 수년간 운영되던 시스템의 아키텍처도 변경 및 개선될 수 있다
	- 요구사항 변화에 자연스럽게 대응할 수 있도록 코드 베이스를 잘 설계해준다
- 리팩터링을 통해 **현재까지  파악한 요구사항**만을 해결하는 소프트웨어를 구축한다
	- 간결한 설계(Simple Design), 점진적 설계(Incremental Design), YAGNI("you aren't going to need it")
	- 나중에 더 깊이 문제를 이해하게 됐을 때 처리하는 쪽이 좋다

#### 리팩터링과 소프트웨어 개발 프로세스
- 자가 테스트 코드
	- 리팩터링의 중요한 토대
	- 프로그래밍 도중 발생한 오류를 확실히 걸러내는 테스트 스위트가 중요하다
- 지속적 통합
	- 팀원 각자가 수행한 리팩터링 결과물을 빠르게 동료와 공유할 수 있다
	- 자가 테스트 코드 역시 지속적 통합의 중요한 토대
- 리팩터링
- 자가 테스트코드, 지속적 통합, 리팩터링 실천법을 잘 조화시키면 요구사항에 빠르게 대응하고 안정적인 선순환 구조를 코드베이스에 심을 수 있다

#### 리팩터링과 성능
- 리팩터링을 하면 성능 튜닝에 투입할 시간을 벌 수 있다
	- 기능 추가가 빨리 끝나서 성능에 집중할 수 있는 시간을 벌 수 있다
- 리팩터링이 잘되어이 있는 프로그램은 성능을 더 세밀하게 분석할 수 있다
	- 성능 튜닝 대상 코드 범위가 줄어들어 튜닝하기 쉬워진다
