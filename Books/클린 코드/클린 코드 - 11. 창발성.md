본 글은 '클린 코드(로버트.C.마틴)'를 정리한 글입니다.

---

다음 네 가지 규칙을 따르면 우수한 설계의 창발성을 촉진한다

> [!info] 창발성
> **창발**(創發)또는 **떠오름 현상**은 하위 계층(구성 요소)에는 없는 특성이나 행동이 상위 계층(전체 구조)에서 자발적으로 돌연히 출현하는 현상이다. 또한 불시에 솟아나는 특성을 창발성([영어](https://ko.wikipedia.org/wiki/%EC%98%81%EC%96%B4 "영어"): emergent property) 또는 이머전스([영어](https://ko.wikipedia.org/wiki/%EC%98%81%EC%96%B4): emergence)라고도 부른다.

1. 모든 테스트를 실행한다
2. 중복을 없앤다
3. 프로그래머의 의도를 표현한다
4. 클래스와 메서드의 수를 최소로 줄인다

### 1. 모든 테스트를 실행하라
설계는 의도한 대로 돌아가느 시스템을 내놓아야 한다. 시스템을 완벽히 설계했지만, 의도한 대로 돌아가는지 검증하는 방법이 없다면 가치를 인정받기 힘들다.

테스트를 철저히 거쳐 모든 테트스 케이스를 항상 통과하는 시스템은 '테스트 가능한 시스템'이다. 테스트가 가능한 시스템을 만드려고 애쓰면 설계 품질이 높아진다. 결합도가 높으면 테스트가 어렵다. 결합도를 낮추기 위해서 개발자는 여러가지 노력을 하게되고, 그 결과 더 나은 시스템이 만들어진다.


### 2. 중복을 없애라
중복은 악의 근원이다. 중복은 추가 작업, 추가 위험, 불필요한 복잡도를 뜻하기 때문이다. 비슷한 코드, 비슷한 구현 모두 중복으로 볼 수 있다. 깔끔한 시스템을 만드려면 단 몇 줄이라도 중복을 제거하겠다는 의지가 필요하다.

중복을 제거하다 보면 함수가 분리되고 클래스도 분리될 수 있다. [[템플리 메서드 패턴]]은 고차원의 중복을 제거할 목적으로 자주 사용하는 기법이다.

```Java
public class VacationPolicy {
	public void accureUSDivisionVacation() {
		// 근무 시간을 바탕으로 휴가 일수 계산
		...
		
		// 휴가 일수가 미국 최소 법정 일수를 만족하는지 확인
		...
		
		// 휴가 일수를 급여 대장에 적용
	}
	
	public void accureEUDivisionVacation() {
		// 근무 시간을 바탕으로 휴가 일수 계산
		...
		
		// 휴가 일수가 유럽 연합 최소 법정 일수를 만족하는지 확인
		...
		
		// 휴가 일수를 급여 대장에 적용
	}
}
```

최소 법정 일수를 계산하는 코드만 제외하고 두 메서드는 거의 동일하다. 최소 법정 일수는 직원의 유형에 따라 달라진다.

```Java
abstract public class VacationPolicy {
	private void calculateBaseVacationHours() { ... }
	abstract protected void alterForLegalMinimums();
	private void applyToPayroll() { ... }
}

public class USVacationPolicy extends VacationPolicy {
	@Override
	protected void alterForLegalMinimums() {
		// 미국 최소 법정 일수
	}
}


public class EUVacationPolicy extends VacationPolicy {
	@Override
	protected void alterForLegalMinimums() {
		// 유럽연합 최소 법정 일수
	}
}
```

### 표현하라
시스템이 복잡해지면 유지보수 개발자가 시스템을 이해하느라 보내는 시간이 점점 길어진다. 그러므로 코드는 개발자의 의도를 분명히 표현해야 한다.

- 좋은 이름을 선택한다
- 함수와 클래스의 크기를 가능한 줄인다
- 표준 명칭을 사용한다
- 단위 테스트 케이스를 꼼꼼히 작성한다

위 같은 방법을 적용하면 코드의 표현력이 높아질 것이다. 하지만 가장 중요한 것은 표현력 높은 코드를 작성하고자 하는 노력이다. 

### 클리스와 메서드의 수를 줄여라
클래스와 메서드의 수를 가능한 줄이는 것이 좋다. 때로는 무의미한 정책 때문에 클래스 수와 메서드 수가 늘어나기도 한다. 목표는 함수와 클래스의 크기를 작게 유지하면서 동시에 시스템 크기도 작게 유지하는 데 있다.